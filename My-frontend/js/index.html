<!-- Debug Button -->
<button onclick="testDebug()" class="btn btn-danger position-fixed" style="bottom: 10px; left: 10px; z-index: 9999;">
    ğŸ› Debug
</button>

<script>
    // Debug functions
    function testDebug() {
        console.clear();
        console.log('=== ğŸ› DEBUG MODE ===');

        // Test localStorage
        console.log('ğŸ“¦ localStorage:');
        console.log('  user:', localStorage.getItem('user'));
        console.log('  token:', localStorage.getItem('token') ? 'EXISTS' : 'MISSING');

        // Test authManager
        console.log('ğŸ‘¤ authManager:', window.authManager);
        console.log('ğŸ‘¤ Current user:', window.authManager?.currentUser);

        // Test API
        console.log('ğŸŒ Testing API connection...');
        fetch('http://localhost:8081/api/health')
            .then(r => r.json())
            .then(data => {
                console.log('âœ… API is working:', data);

                // Test login endpoint
                console.log('ğŸ” Testing login endpoint...');
                return fetch('http://localhost:8081/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username: 'admin',
                        password: 'admin123'
                    })
                });
            })
            .then(async response => {
                console.log('ğŸ” Login response status:', response.status);
                const text = await response.text();
                console.log('ğŸ” Login response:', text);

                if (response.ok) {
                    const result = JSON.parse(text);
                    console.log('âœ… Login successful! Token:', result.accessToken ? 'RECEIVED' : 'MISSING');
                    console.log('âœ… User role:', result.role);

                    // Test dashboard URLs
                    console.log('ğŸ¯ Testing dashboard URLs...');
                    const urls = ['/dashboard.html', '/admin-dashboard.html', '/moderator-dashboard.html'];
                    urls.forEach(url => {
                        fetch(url, { method: 'HEAD' })
                            .then(r => console.log(`  ${url}: ${r.ok ? 'âœ… EXISTS' : 'âŒ MISSING'}`))
                            .catch(() => console.log(`  ${url}: âŒ ERROR`));
                    });
                }
            })
            .catch(error => {
                console.error('âŒ Debug test failed:', error);
            });
    }

    // Auto-run on page load
    document.addEventListener('DOMContentLoaded', () => {
        console.log('=== ğŸ”§ PAGE LOADED ===');
        console.log('ğŸ“„ Current URL:', window.location.href);
        console.log('ğŸ“„ Current path:', window.location.pathname);
        console.log('ğŸ” Checking dashboard files...');

        // Check for dashboard files
        ['/dashboard.html', '/admin-dashboard.html', '/moderator-dashboard.html'].forEach(url => {
            fetch(url, { method: 'HEAD' })
                .then(r => console.log(`${url}: ${r.ok ? 'âœ… EXISTS' : 'âŒ MISSING'}`))
                .catch(() => console.log(`${url}: âŒ ERROR`));
        });
    });
</script>